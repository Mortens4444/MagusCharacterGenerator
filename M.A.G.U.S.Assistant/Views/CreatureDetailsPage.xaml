<?xml version="1.0" encoding="utf-8" ?>
<v:NotifierPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
              xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
              xmlns:v="clr-namespace:Mtf.LanguageService.MAUI.Views;assembly=Mtf.LanguageService.MAUI"
              xmlns:m="clr-namespace:M.A.G.U.S.GameSystem;assembly=M.A.G.U.S."
              xmlns:vm="clr-namespace:M.A.G.U.S.Assistant.ViewModels"
              xmlns:conv="clr-namespace:Mtf.LanguageService.MAUI.Converters;assembly=Mtf.LanguageService.MAUI"
              x:Class="M.A.G.U.S.Assistant.Views.CreatureDetailsPage"
              x:ClassModifier="internal"
              x:DataType="vm:CreatureDetailsViewModel">

    <v:NotifierPage.Resources>
        <ResourceDictionary>
            <conv:TranslationConverter x:Key="TranslationConverter" />
            <conv:EnumDescriptionTranslationConverter x:Key="EnumDescriptionTranslationConverter" />
        </ResourceDictionary>
    </v:NotifierPage.Resources>

    <ScrollView>
        <StackLayout Padding="12" Spacing="8">

            <!-- Image & sound -->
            <Image Source="{Binding Image}" HeightRequest="200" Aspect="AspectFit" />
            <Button Text="ðŸ”ˆ" BackgroundColor="Transparent" Command="{Binding PlaySoundCommand}" IsVisible="{Binding IsSoundAvailable}" />
            
            <!-- Top summary -->
            <Border Padding="10">
                <Grid ColumnDefinitions="Auto, *" RowDefinitions="Auto,Auto" ColumnSpacing="12" RowSpacing="6">
                    <Label Text="Number appearing" FontAttributes="Bold" Grid.Row="0" Grid.Column="0" />
                    <Label Text="{Binding NumberAppearing}" Grid.Row="0" Grid.Column="1" />
                </Grid>
            </Border>

            <!-- Properties two-column -->
            <Border Padding="8">
                <Grid ColumnDefinitions="2*,3*" RowSpacing="6" ColumnSpacing="12" RowDefinitions="*,*,*,*,*,*,*,*,*,*,*,*,*,*">
                    <!-- Static list of properties you mentioned on the screenshot -->
                    <Label Text="Occurrence" Grid.Row="0" Grid.Column="0" FontAttributes="Bold" />
                    <Label Text="{Binding Occurrence, Converter={StaticResource EnumDescriptionTranslationConverter}}" Grid.Row="0" Grid.Column="1" />

                    <Label Text="Intelligence" Grid.Row="1" Grid.Column="0" FontAttributes="Bold" />
                    <Label Text="{Binding Intelligence, Converter={StaticResource EnumDescriptionTranslationConverter}}" Grid.Row="1" Grid.Column="1" />

                    <Label Text="Size" Grid.Row="2" Grid.Column="0" FontAttributes="Bold" />
                    <Label Text="{Binding Size, Converter={StaticResource EnumDescriptionTranslationConverter}}" Grid.Row="2" Grid.Column="1" />

                    <Label Text="Speed" Grid.Row="3" Grid.Column="0" FontAttributes="Bold" />
                    <Label Text="{Binding Speed}" Grid.Row="3" Grid.Column="1" />

                    <Label Text="Attack modes" Grid.Row="4" Grid.Column="0" FontAttributes="Bold" />
                    <StackLayout Grid.Row="4" Grid.Column="1" Spacing="0">
                        <CollectionView ItemsSource="{Binding AttackModes}">
                            <CollectionView.ItemTemplate>
                                <DataTemplate x:DataType="m:Attack">
                                    <Label>
                                        <Label.Text>
                                            <MultiBinding StringFormat="{}{0} - {1}">
                                                <Binding Path="Name" Converter="{StaticResource TranslationConverter}" />
                                                <Binding Path="Value" />
                                            </MultiBinding>
                                        </Label.Text>
                                    </Label>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </StackLayout>
                    
                    <Label Text="Defense value" Grid.Row="5" Grid.Column="0" FontAttributes="Bold" />
                    <Label Text="{Binding DefenseValue}" Grid.Row="5" Grid.Column="1" />

                    <Label Text="Initiator value" Grid.Row="6" Grid.Column="0" FontAttributes="Bold" />
                    <Label Text="{Binding InitiatingValue}" Grid.Row="6" Grid.Column="1" />

                    <Label Text="Health points" Grid.Row="7" Grid.Column="0" FontAttributes="Bold" />
                    <Label Text="{Binding HealthPoints}" Grid.Row="7" Grid.Column="1" />

                    <Label Text="Pain tolerance points" Grid.Row="8" Grid.Column="0" FontAttributes="Bold" />
                    <Label Text="{Binding PainTolerancePoints}" Grid.Row="8" Grid.Column="1" />

                    <Label Text="Poison resistance" Grid.Row="9" Grid.Column="0" FontAttributes="Bold" />
                    <Label Text="{Binding PoisonResistance}" Grid.Row="9" Grid.Column="1" />

                    <Label Text="Experience points" Grid.Row="10" Grid.Column="0" FontAttributes="Bold" />
                    <Label Text="{Binding ExperiencePoints}" Grid.Row="10" Grid.Column="1" />

                    <Label Text="Attacks per round" Grid.Row="11" Grid.Column="0" FontAttributes="Bold" />
                    <Label Text="{Binding AttacksPerRound}" Grid.Row="11" Grid.Column="1" />
                </Grid>
            </Border>

            <!-- Damage area -->
            <Border Padding="10">
                <StackLayout Spacing="8">
                    <Grid ColumnDefinitions="4*,3*,3*" RowDefinitions="Auto, Auto">
                        <Label Text="Attack mode" FontAttributes="Bold" VerticalOptions="Center" />
                        <Picker ItemsSource="{Binding AttackModes}"
                                ItemDisplayBinding="{Binding Name, Converter={StaticResource TranslationConverter}}"
                                SelectedItem="{Binding SelectedAttackMode}"
                                Grid.Column="1"
                                Grid.ColumnSpan="2"/>
                        <Button Grid.Row="1" Text="Initiate" Command="{Binding InitiateCommand}" Margin="0,0,5,0" />
                        <Button Grid.Row="1" Grid.Column="1" Text="Attack" Command="{Binding AttackCommand}" />
                        <Button Grid.Row="1" Grid.Column="2" Text="Roll Damage" Command="{Binding RollDamageCommand}" Margin="5,0,0,0" />
                    </Grid>

                    <Label Text="Place of attack" FontAttributes="Bold" Grid.Row="1" Grid.Column="0" />
                    <Label Text="{Binding PlaceOfAttack}" Grid.Row="1" Grid.Column="1" />

                    <Label Text="{Binding LastActionName}" FontSize="16" FontAttributes="Bold" />
                    <Label Text="{Binding LastAction}" FontSize="12" Opacity="0.8" />
                </StackLayout>
            </Border>
        </StackLayout>
    </ScrollView>
</v:NotifierPage>