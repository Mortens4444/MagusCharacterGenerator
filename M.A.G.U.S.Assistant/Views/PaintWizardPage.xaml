<v:NotifierPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                 xmlns:c="clr-namespace:Mtf.LanguageService.MAUI.Converters;assembly=Mtf.LanguageService.MAUI"
                 xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                 xmlns:v="clr-namespace:Mtf.LanguageService.MAUI.Views;assembly=Mtf.LanguageService.MAUI"
                 xmlns:vm="clr-namespace:M.A.G.U.S.Assistant.ViewModels"
                 xmlns:m="clr-namespace:M.A.G.U.S.Assistant.Models"
                 xmlns:local="clr-namespace:M.A.G.U.S.Assistant.Enums"
                 x:Class="M.A.G.U.S.Assistant.Views.PaintWizardPage"
                 x:ClassModifier="internal"
                 x:DataType="vm:PaintWizardViewModel"
                 Title="Paint">
    <Grid RowDefinitions="*, 100" ColumnDefinitions="100, *, 100" BackgroundColor="Black">

        <VerticalStackLayout Grid.Column="0" Spacing="10" Padding="10" BackgroundColor="#222">
            <Button Text="✎" Command="{Binding SelectToolCommand}" CommandParameter="{x:Static local:PaintTool.Pencil}"/>
            <Button Text="Fill" FontSize="12" Command="{Binding SelectToolCommand}" CommandParameter="{x:Static local:PaintTool.Fill}"/>
            <Button Text="Pick" FontSize="12" Command="{Binding SelectToolCommand}" CommandParameter="{x:Static local:PaintTool.Picker}"/>
            <Entry Text="{Binding DefaultText}" Placeholder="M.A.G.U.S." TextColor="White" BackgroundColor="#333" />
            <Button Text="Era" FontSize="12" Command="{Binding SelectToolCommand}" CommandParameter="{x:Static local:PaintTool.Eraser}"/>
        </VerticalStackLayout>

        <Border Grid.Column="1" Margin="5" StrokeThickness="0" BackgroundColor="White" VerticalOptions="Fill" HorizontalOptions="Fill">
            <GraphicsView x:Name="CanvasView"
                          Drawable="{Binding DrawingLogic}"
                          BackgroundColor="White"
                          StartInteraction="OnTouchStart"
                          DragInteraction="OnTouchDrag"
                          EndInteraction="OnTouchEnd" />
        </Border>

        <VerticalStackLayout Grid.Column="2" Spacing="10" Padding="10" BackgroundColor="#222">
            <Button Text="—" Command="{Binding SelectToolCommand}" CommandParameter="{x:Static local:PaintTool.Line}"/>
            <Button Text="⬜" Command="{Binding SelectToolCommand}" CommandParameter="{x:Static local:PaintTool.Rect}"/>
            <Button Text="◯" Command="{Binding SelectToolCommand}" CommandParameter="{x:Static local:PaintTool.Circle}"/>
        </VerticalStackLayout>

        <FlexLayout Grid.Row="1" Grid.ColumnSpan="3" Wrap="Wrap" JustifyContent="Center" AlignItems="Center" BackgroundColor="#111">
            <BindableLayout.ItemsSource>
                <Binding Path="Palette" />
            </BindableLayout.ItemsSource>
            <BindableLayout.ItemTemplate>
                <DataTemplate x:DataType="Color">
                    <Border WidthRequest="35" HeightRequest="35" Margin="3" BackgroundColor="{Binding .}">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="5"/>
                        </Border.StrokeShape>
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type vm:PaintWizardViewModel}}, Path=SelectColorCommand}" CommandParameter="{Binding .}"/>
                        </Border.GestureRecognizers>
                    </Border>
                </DataTemplate>
            </BindableLayout.ItemTemplate>
        </FlexLayout>
    </Grid>
</v:NotifierPage>